from JetEngine import *

# Create a new JetCOW opened for read/write
cow = JetCOW("world.cow", False, True)

# New scene, and reference it in the world header
scene = cow.newScene()
cow.getHeader().setAttrInt("MainScene", scene.id)
print "New scene"

# Add a light
light = cow.newDict("DynamicPointLight")
light.setAttrFloat("tx", -100)
light.setAttrFloat("ty", 100)
light.setAttrFloat("tz", 100)
light.setAttrFloat("Intensity", 1.2)
scene.attachChild(light)
light.unref()
print "Added light"

# Add skybox to the scene
skybox = cow.newDict("Skybox")
scene.attachChild(skybox)
skybox.unref()
print "Added skybox"

# Create a sphere generator, point the Surface at it, and add that to the scene
surf = cow.newDict("Surface")
gen = cow.newDict("SuperellipsoidGenerator")
gen.setAttrFloat("Radius",50)
gen.setAttrFloat("xe",0.8)
gen.setAttrFloat("ye",0.8)
gen.setAttrFloat("ze",0.8)
surf.setAttrInt("Generator", gen.id)
surf.setAttrFloat("tz",-200)
scene.attachChild(surf)
gen.unref()
surf.unref()
print "Added superellipsoid"

# Unreference scene, flush JetCOW to disk
scene.unref()
cow.flush()

